{"version":3,"file":"create-pull-request.cjs.development.js","sources":["../src/index.ts"],"sourcesContent":["import core from '@actions/core';\nimport { Octokit } from '@octokit/core';\nimport { Endpoints, RequestError } from '@octokit/types';\n\ntype createPullRequestResponse = Endpoints['POST /repos/:owner/:repo/pulls']['response'];\n\nconst githubToken = core.getInput('github-token');\nconst headBranch = core.getInput('head-branch');\nconst baseBranch = core.getInput('base-branch');\nconst labelName = core.getInput('label-name');\nconst octokit = new Octokit({ auth: githubToken });\n\nconst createPullRequest = () => {\n  octokit\n    .request(`POST /repos/${process.env.GITHUB_REPOSITORY}/pulls`, {\n      title: 'Automated',\n      head: headBranch,\n      base: baseBranch,\n    })\n    .then((res: createPullRequestResponse) => {\n      addLabelToPullRequest(res.data.number);\n    })\n    .catch((e: RequestError) => {\n      core.setFailed(e.name);\n    });\n};\n\nconst addLabelToPullRequest = (pullRequestNumber: number) => {\n  octokit\n    .request(\n      `POST /repos/${process.env.GITHUB_REPOSITORY}/issues/{issue_number}/labels`,\n      {\n        issue_number: pullRequestNumber,\n        labels: [labelName],\n      }\n    )\n    .then(() => core.setOutput('message', `PR Created`))\n    .catch(() => core.setFailed('Could not attach Label to PR'));\n};\n\ncreatePullRequest();\n"],"names":["githubToken","core","getInput","headBranch","baseBranch","labelName","octokit","Octokit","auth","createPullRequest","request","process","env","GITHUB_REPOSITORY","title","head","base","then","res","addLabelToPullRequest","data","number","e","setFailed","name","pullRequestNumber","issue_number","labels","setOutput"],"mappings":";;;;;;;AAMA,IAAMA,WAAW,gBAAGC,IAAI,CAACC,QAAL,CAAc,cAAd,CAApB;AACA,IAAMC,UAAU,gBAAGF,IAAI,CAACC,QAAL,CAAc,aAAd,CAAnB;AACA,IAAME,UAAU,gBAAGH,IAAI,CAACC,QAAL,CAAc,aAAd,CAAnB;AACA,IAAMG,SAAS,gBAAGJ,IAAI,CAACC,QAAL,CAAc,YAAd,CAAlB;AACA,IAAMI,OAAO,gBAAG,IAAIC,cAAJ,CAAY;AAAEC,EAAAA,IAAI,EAAER;AAAR,CAAZ,CAAhB;;AAEA,IAAMS,iBAAiB,GAAG,SAApBA,iBAAoB;AACxBH,EAAAA,OAAO,CACJI,OADH,kBAC0BC,OAAO,CAACC,GAAR,CAAYC,iBADtC,aACiE;AAC7DC,IAAAA,KAAK,EAAE,WADsD;AAE7DC,IAAAA,IAAI,EAAEZ,UAFuD;AAG7Da,IAAAA,IAAI,EAAEZ;AAHuD,GADjE,EAMGa,IANH,CAMQ,UAACC,GAAD;AACJC,IAAAA,qBAAqB,CAACD,GAAG,CAACE,IAAJ,CAASC,MAAV,CAArB;AACD,GARH,WASS,UAACC,CAAD;AACLrB,IAAAA,IAAI,CAACsB,SAAL,CAAeD,CAAC,CAACE,IAAjB;AACD,GAXH;AAYD,CAbD;;AAeA,IAAML,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACM,iBAAD;AAC5BnB,EAAAA,OAAO,CACJI,OADH,kBAEmBC,OAAO,CAACC,GAAR,CAAYC,iBAF/B,oCAGI;AACEa,IAAAA,YAAY,EAAED,iBADhB;AAEEE,IAAAA,MAAM,EAAE,CAACtB,SAAD;AAFV,GAHJ,EAQGY,IARH,CAQQ;AAAA,WAAMhB,IAAI,CAAC2B,SAAL,CAAe,SAAf,eAAN;AAAA,GARR,WASS;AAAA,WAAM3B,IAAI,CAACsB,SAAL,CAAe,8BAAf,CAAN;AAAA,GATT;AAUD,CAXD;;AAaAd,iBAAiB"}