{"version":3,"file":"create-pull-request.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["import core from '@actions/core';\nimport { Octokit } from '@octokit/core';\nimport { Endpoints, RequestError } from '@octokit/types';\n\ntype createPullRequestResponse = Endpoints['POST /repos/:owner/:repo/pulls']['response'];\n\nconst githubToken = core.getInput('github-token');\nconst headBranch = core.getInput('head-branch');\nconst baseBranch = core.getInput('base-branch');\nconst labelName = core.getInput('label-name');\nconst octokit = new Octokit({ auth: githubToken });\n\nconst createPullRequest = () => {\n  octokit\n    .request(`POST /repos/${process.env.GITHUB_REPOSITORY}/pulls`, {\n      title: 'Automated',\n      head: headBranch,\n      base: baseBranch,\n    })\n    .then((res: createPullRequestResponse) => {\n      addLabelToPullRequest(res.data.number);\n    })\n    .catch((e: RequestError) => {\n      core.setFailed(e.name);\n    });\n};\n\nconst addLabelToPullRequest = (pullRequestNumber: number) => {\n  octokit\n    .request(\n      `POST /repos/${process.env.GITHUB_REPOSITORY}/issues/{issue_number}/labels`,\n      {\n        issue_number: pullRequestNumber,\n        labels: [labelName],\n      }\n    )\n    .then(() => core.setOutput('message', `PR Created`))\n    .catch(() => core.setFailed('Could not attach Label to PR'));\n};\n\ncreatePullRequest();\n"],"names":["githubToken","core","getInput","headBranch","baseBranch","labelName","octokit","Octokit","auth","request","process","env","GITHUB_REPOSITORY","title","head","base","then","res","issue_number","data","number","labels","setOutput","setFailed","e","name"],"mappings":"4HAMMA,EAAcC,EAAKC,SAAS,gBAC5BC,EAAaF,EAAKC,SAAS,eAC3BE,EAAaH,EAAKC,SAAS,eAC3BG,EAAYJ,EAAKC,SAAS,cAC1BI,EAAU,IAAIC,UAAQ,CAAEC,KAAMR,IAGlCM,EACGG,uBAAuBC,QAAQC,IAAIC,2BAA2B,CAC7DC,MAAO,YACPC,KAAMX,EACNY,KAAMX,IAEPY,MAAK,SAACC,GASTX,EACGG,uBACgBC,QAAQC,IAAIC,kDAC3B,CACEM,aAZoBD,EAAIE,KAAKC,OAa7BC,OAAQ,CAAChB,KAGZW,MAAK,kBAAMf,EAAKqB,UAAU,kCACpB,kBAAMrB,EAAKsB,UAAU,6CAfrB,SAACC,GACNvB,EAAKsB,UAAUC,EAAEC"}